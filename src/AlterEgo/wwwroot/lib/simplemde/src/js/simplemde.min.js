"use strict";function fixShortcut(n){return isMac?n.replace("Ctrl","Cmd"):n.replace("Cmd","Ctrl")}function createIcon(n,t,i){n=n||{};var r=document.createElement("a");return t=t==undefined?!0:t,n.title&&t&&(r.title=createTootlip(n.title,n.action,i),isMac&&(r.title=r.title.replace("Ctrl","\u2318"),r.title=r.title.replace("Alt","\u2325"))),r.tabIndex=-1,r.className=n.className,r}function createSep(){var n=document.createElement("i");return n.className="separator",n.innerHTML="|",n}function createTootlip(n,t,i){var r,u=n;return t&&(r=getBindingName(t),i[r]&&(u+=" ("+fixShortcut(i[r])+")")),u}function getState(n,t){var f,e,i,r,o,u;if(t=t||n.getCursor("start"),f=n.getTokenAt(t),!f.type)return{};for(e=f.type.split(" "),i={},u=0;u<e.length;u++)r=e[u],r==="strong"?i.bold=!0:r==="variable-2"?(o=n.getLine(t.line),/^\s*\d+\.\s/.test(o)?i["ordered-list"]=!0:i["unordered-list"]=!0):r==="atom"?i.quote=!0:r==="em"?i.italic=!0:r==="quote"?i.quote=!0:r==="strikethrough"?i.strikethrough=!0:r==="comment"?i.code=!0:r==="link"?i.link=!0:r==="tag"?i.image=!0:r.match(/^header(\-[1-6])?$/)&&(i[r.replace("header","heading")]=!0);return i}function toggleFullScreen(n){var t=n.codemirror,i,r,u;t.setOption("fullScreen",!t.getOption("fullScreen"));t.getOption("fullScreen")?(saved_overflow=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=saved_overflow;i=t.getWrapperElement();/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen";r=n.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active";u=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(u.className)&&toggleSideBySide(n)}function toggleBold(n){_toggleBlock(n,"bold",n.options.blockStyles.bold)}function toggleItalic(n){_toggleBlock(n,"italic",n.options.blockStyles.italic)}function toggleStrikethrough(n){_toggleBlock(n,"strikethrough","~~")}function toggleCodeBlock(n){function o(n){if(typeof n!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof n+": "+n;return n.styles&&n.styles[2]&&n.styles[2].indexOf("formatting-code-block")!==-1}function l(n){return n.state.base.base||n.state.base}function y(n,t,i,r,u){i=i||n.getLineHandle(t);r=r||n.getTokenAt({line:t,ch:1});u=u||!!i.text&&n.getTokenAt({line:t,ch:i.text.length-1});var f=r.type?r.type.split(" "):[];return u&&l(u).indentedCode?"indented":f.indexOf("comment")===-1?!1:l(r).fencedChars||l(u).fencedChars||o(i)?"fenced":"single"}function et(n,t,i,r){var o=t.line+1,u=i.line+1,f=t.line!==i.line,s=r+"\n",e="\n"+r;f&&u++;f&&i.ch===0&&(e=r+"\n",u--);_replaceSelection(n,!1,[s,e]);n.setSelection({line:o,ch:0},{line:u,ch:0})}var ft=n.options.blockStyles.code,t=n.codemirror,i=t.getCursor("start"),r=t.getCursor("end"),ot=t.getTokenAt({line:i.line,ch:i.ch||1}),e=t.getLineHandle(i.line),b=y(t,i.line,e,ot),u,f,p,d,g,nt,k,h,c,a,s,v,w,rt,ut;if(b==="single")d=e.text.slice(0,i.ch).replace("`",""),g=e.text.slice(i.ch).replace("`",""),t.replaceRange(d+g,{line:i.line,ch:0},{line:i.line,ch:99999999999999}),i.ch--,i!==r&&r.ch--,t.setSelection(i,r),t.focus();else if(b==="fenced")if(i.line!==r.line||i.ch!==r.ch){for(u=i.line;u>=0;u--)if(e=t.getLineHandle(u),o(e))break;nt=t.getTokenAt({line:u,ch:1});k=l(nt).fencedChars;o(t.getLineHandle(i.line))?(h="",c=i.line):o(t.getLineHandle(i.line-1))?(h="",c=i.line-1):(h=k+"\n",c=i.line);o(t.getLineHandle(r.line))?(a="",s=r.line,r.ch===0&&(s+=1)):r.ch!==0&&o(t.getLineHandle(r.line+1))?(a="",s=r.line+1):(a=k+"\n",s=r.line+1);r.ch===0&&(s-=1);t.operation(function(){t.replaceRange(a,{line:s,ch:0},{line:s+(a?0:1),ch:0});t.replaceRange(h,{line:c,ch:0},{line:c+(h?0:1),ch:0})});t.setSelection({line:c+(h?1:0),ch:0},{line:s+(h?1:-1),ch:0});t.focus()}else{if(v=i.line,o(t.getLineHandle(i.line))&&(y(t,i.line+1)==="fenced"?(u=i.line,v=i.line+1):(f=i.line,v=i.line-1)),u===undefined)for(u=v;u>=0;u--)if(e=t.getLineHandle(u),o(e))break;if(f===undefined)for(p=t.lineCount(),f=v;f<p;f++)if(e=t.getLineHandle(f),o(e))break;t.operation(function(){t.replaceRange("",{line:u,ch:0},{line:u+1,ch:0});t.replaceRange("",{line:f-1,ch:0},{line:f,ch:0})});t.focus()}else if(b==="indented"){if(i.line!==r.line||i.ch!==r.ch)u=i.line,f=r.line,r.ch===0&&f--;else{for(u=i.line;u>=0;u--)if(e=t.getLineHandle(u),e.text.match(/^\s*$/))continue;else if(y(t,u,e)!=="indented"){u+=1;break}for(p=t.lineCount(),f=i.line;f<p;f++)if(e=t.getLineHandle(f),e.text.match(/^\s*$/))continue;else if(y(t,f,e)!=="indented"){f-=1;break}}var tt=t.getLineHandle(f+1),it=tt&&t.getTokenAt({line:f+1,ch:tt.text.length-1}),st=it&&l(it).indentedCode;for(st&&t.replaceRange("\n",{line:f+1,ch:0}),w=u;w<=f;w++)t.indentLine(w,"subtract");t.focus()}else rt=i.line===r.line&&i.ch===r.ch&&i.ch===0,ut=i.line!==r.line,rt||ut?et(t,i,r,ft):_replaceSelection(t,!1,["`","`"])}function toggleBlockquote(n){var t=n.codemirror;_toggleLine(t,"quote")}function toggleHeadingSmaller(n){var t=n.codemirror;_toggleHeading(t,"smaller")}function toggleHeadingBigger(n){var t=n.codemirror;_toggleHeading(t,"bigger")}function toggleHeading1(n){var t=n.codemirror;_toggleHeading(t,undefined,1)}function toggleHeading2(n){var t=n.codemirror;_toggleHeading(t,undefined,2)}function toggleHeading3(n){var t=n.codemirror;_toggleHeading(t,undefined,3)}function toggleUnorderedList(n){var t=n.codemirror;_toggleLine(t,"unordered-list")}function toggleOrderedList(n){var t=n.codemirror;_toggleLine(t,"ordered-list")}function cleanBlock(n){var t=n.codemirror;_cleanBlock(t)}function drawLink(n){var r=n.codemirror,u=getState(r),t=n.options,i="http://";if(t.promptURLs&&(i=prompt(t.promptTexts.link),!i))return!1;_replaceSelection(r,u.link,t.insertTexts.link,i)}function drawImage(n){var r=n.codemirror,u=getState(r),t=n.options,i="http://";if(t.promptURLs&&(i=prompt(t.promptTexts.image),!i))return!1;_replaceSelection(r,u.image,t.insertTexts.image,i)}function drawTable(n){var t=n.codemirror,i=getState(t),r=n.options;_replaceSelection(t,i.table,r.insertTexts.table)}function drawHorizontalRule(n){var t=n.codemirror,i=getState(t),r=n.options;_replaceSelection(t,i.image,r.insertTexts.horizontalRule)}function undo(n){var t=n.codemirror;t.undo();t.focus()}function redo(n){var t=n.codemirror;t.redo();t.focus()}function toggleSideBySide(n){var t=n.codemirror,r=t.getWrapperElement(),i=r.nextSibling,f=n.toolbarElements["side-by-side"],s=!1,u,e,o,h;if(/editor-preview-active-side/.test(i.className)?(i.className=i.className.replace(/\s*editor-preview-active-side\s*/g,""),f.className=f.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||toggleFullScreen(n);i.className+=" editor-preview-active-side"},1),f.className+=" active",r.className+=" CodeMirror-sided",s=!0),u=r.lastChild,/editor-preview-active/.test(u.className)&&(u.className=u.className.replace(/\s*editor-preview-active\s*/g,""),e=n.toolbarElements.preview,o=r.previousSibling,e.className=e.className.replace(/\s*active\s*/g,""),o.className=o.className.replace(/\s*disabled-for-preview*/g,"")),h=function(){i.innerHTML=n.options.previewRender(n.value(),i)},t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=h),s){i.innerHTML=n.options.previewRender(n.value(),i);t.on("update",t.sideBySideRenderingFunction)}else t.off("update",t.sideBySideRenderingFunction);t.refresh()}function togglePreview(n){var f=n.codemirror,r=f.getWrapperElement(),u=r.previousSibling,i=n.options.toolbar?n.toolbarElements.preview:!1,t=r.lastChild,e;t&&/editor-preview/.test(t.className)||(t=document.createElement("div"),t.className="editor-preview",r.appendChild(t));/editor-preview-active/.test(t.className)?(t.className=t.className.replace(/\s*editor-preview-active\s*/g,""),i&&(i.className=i.className.replace(/\s*active\s*/g,""),u.className=u.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){t.className+=" editor-preview-active"},1),i&&(i.className+=" active",u.className+=" disabled-for-preview"));t.innerHTML=n.options.previewRender(n.value(),t);e=f.getWrapperElement().nextSibling;/editor-preview-active-side/.test(e.className)&&toggleSideBySide(n)}function _replaceSelection(n,t,i,r){if(!/editor-preview-active/.test(n.getWrapperElement().lastChild.className)){var f,e=i[0],o=i[1],u=n.getCursor("start"),s=n.getCursor("end");r&&(o=o.replace("#url#",r));t?(f=n.getLine(u.line),e=f.slice(0,u.ch),o=f.slice(u.ch),n.replaceRange(e+o,{line:u.line,ch:0})):(f=n.getSelection(),n.replaceSelection(e+f+o),u.ch+=e.length,u!==s&&(s.ch+=e.length));n.setSelection(u,s);n.focus()}}function _toggleHeading(n,t,i){var u,f,r;if(!/editor-preview-active/.test(n.getWrapperElement().lastChild.className)){for(u=n.getCursor("start"),f=n.getCursor("end"),r=u.line;r<=f.line;r++)(function(r){var u=n.getLine(r),f=u.search(/[^#]/);u=t!==undefined?f<=0?t=="bigger"?"###### "+u:"# "+u:f==6&&t=="smaller"?u.substr(7):f==1&&t=="bigger"?u.substr(2):t=="bigger"?u.substr(1):"#"+u:i==1?f<=0?"# "+u:f==i?u.substr(f+1):"# "+u.substr(f+1):i==2?f<=0?"## "+u:f==i?u.substr(f+1):"## "+u.substr(f+1):f<=0?"### "+u:f==i?u.substr(f+1):"### "+u.substr(f+1);n.replaceRange(u,{line:r,ch:0},{line:r,ch:99999999999999})})(r);n.focus()}}function _toggleLine(n,t){var i;if(!/editor-preview-active/.test(n.getWrapperElement().lastChild.className)){var r=getState(n),u=n.getCursor("start"),f=n.getCursor("end"),e={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},o={quote:"> ","unordered-list":"* ","ordered-list":"1. "};for(i=u.line;i<=f.line;i++)(function(i){var u=n.getLine(i);u=r[t]?u.replace(e[t],"$1"):o[t]+u;n.replaceRange(u,{line:i,ch:0},{line:i,ch:99999999999999})})(i);n.focus()}}function _toggleBlock(n,t,i,r){if(!/editor-preview-active/.test(n.codemirror.getWrapperElement().lastChild.className)){r=typeof r=="undefined"?i:r;var e=n.codemirror,c=getState(e),u,o=i,s=r,f=e.getCursor("start"),h=e.getCursor("end");c[t]?(u=e.getLine(f.line),o=u.slice(0,f.ch),s=u.slice(f.ch),t=="bold"?(o=o.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),s=s.replace(/(\*\*|__)/,"")):t=="italic"?(o=o.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),s=s.replace(/(\*|_)/,"")):t=="strikethrough"&&(o=o.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),s=s.replace(/(\*\*|~~)/,"")),e.replaceRange(o+s,{line:f.line,ch:0},{line:f.line,ch:99999999999999}),t=="bold"||t=="strikethrough"?(f.ch-=2,f!==h&&(h.ch-=2)):t=="italic"&&(f.ch-=1,f!==h&&(h.ch-=1))):(u=e.getSelection(),t=="bold"?(u=u.split("**").join(""),u=u.split("__").join("")):t=="italic"?(u=u.split("*").join(""),u=u.split("_").join("")):t=="strikethrough"&&(u=u.split("~~").join("")),e.replaceSelection(o+u+s),f.ch+=i.length,h.ch=f.ch+u.length);e.setSelection(f,h);e.focus()}}function _cleanBlock(n){var r,u,i,t;if(!/editor-preview-active/.test(n.getWrapperElement().lastChild.className))for(r=n.getCursor("start"),u=n.getCursor("end"),t=r.line;t<=u.line;t++)i=n.getLine(t),i=i.replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),n.replaceRange(i,{line:t,ch:0},{line:t,ch:99999999999999})}function _mergeProperties(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]instanceof Array?t[i].concat(n[i]instanceof Array?n[i]:[]):t[i]!==null&&typeof t[i]=="object"&&t[i].constructor===Object?_mergeProperties(n[i]||{},t[i]):t[i]);return n}function extend(n){for(var t=1;t<arguments.length;t++)n=_mergeProperties(n,arguments[t]);return n}function wordCount(n){var i=n.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),r=0,t;if(i===null)return r;for(t=0;t<i.length;t++)r+=i[t].charCodeAt(0)>=19968?i[t].length:1;return r}function SimpleMDE(n){var r,u,i,f,t;if(n=n||{},n.parent=this,r=!0,n.autoDownloadFontAwesome===!1&&(r=!1),n.autoDownloadFontAwesome!==!0)for(u=document.styleSheets,i=0;i<u.length;i++)u[i].href&&u[i].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(r=!1);if(r&&(f=document.createElement("link"),f.rel="stylesheet",f.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(f)),n.element)this.element=n.element;else if(n.element===null){console.log("SimpleMDE: Error. No element was found.");return}if(n.toolbar===undefined){n.toolbar=[];for(t in toolbarBuiltInButtons)toolbarBuiltInButtons.hasOwnProperty(t)&&(t.indexOf("separator-")!=-1&&n.toolbar.push("|"),(toolbarBuiltInButtons[t].default===!0||n.showIcons&&n.showIcons.constructor===Array&&n.showIcons.indexOf(t)!=-1)&&n.toolbar.push(t))}n.hasOwnProperty("status")||(n.status=["autosave","lines","words","cursor"]);n.previewRender||(n.previewRender=function(n){return this.parent.markdown(n)});n.parsingConfig=extend({highlightFormatting:!0},n.parsingConfig||{});n.insertTexts=extend({},insertTexts,n.insertTexts||{});n.promptTexts=promptTexts;n.blockStyles=extend({},blockStyles,n.blockStyles||{});n.shortcuts=extend({},shortcuts,n.shortcuts||{});n.autosave!=undefined&&n.autosave.unique_id!=undefined&&n.autosave.unique_id!=""&&(n.autosave.uniqueId=n.autosave.unique_id);this.options=n;this.render();n.initialValue&&(!this.options.autosave||this.options.autosave.foundSavedValue!==!0)&&this.value(n.initialValue)}function isLocalStorageAvailable(){if(typeof localStorage=="object")try{localStorage.setItem("smde_localStorage",1);localStorage.removeItem("smde_localStorage")}catch(n){return!1}else return!1;return!0}var CodeMirror=require("codemirror"),saved_overflow;require("codemirror/addon/edit/continuelist.js");require("./codemirror/tablist");require("codemirror/addon/display/fullscreen.js");require("codemirror/mode/markdown/markdown.js");require("codemirror/addon/mode/overlay.js");require("codemirror/addon/display/placeholder.js");require("codemirror/addon/selection/mark-selection.js");require("codemirror/mode/gfm/gfm.js");require("codemirror/mode/xml/xml.js");var CodeMirrorSpellChecker=require("codemirror-spell-checker"),marked=require("marked"),isMac=/Mac/.test(navigator.platform),bindings={toggleBold:toggleBold,toggleItalic:toggleItalic,drawLink:drawLink,toggleHeadingSmaller:toggleHeadingSmaller,toggleHeadingBigger:toggleHeadingBigger,drawImage:drawImage,toggleBlockquote:toggleBlockquote,toggleOrderedList:toggleOrderedList,toggleUnorderedList:toggleUnorderedList,toggleCodeBlock:toggleCodeBlock,togglePreview:togglePreview,toggleStrikethrough:toggleStrikethrough,toggleHeading1:toggleHeading1,toggleHeading2:toggleHeading2,toggleHeading3:toggleHeading3,cleanBlock:cleanBlock,drawTable:drawTable,drawHorizontalRule:drawHorizontalRule,undo:undo,redo:redo,toggleSideBySide:toggleSideBySide,toggleFullScreen:toggleFullScreen},shortcuts={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},getBindingName=function(n){for(var t in bindings)if(bindings[t]===n)return t;return null},isMobile=function(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n};saved_overflow="";var toolbarBuiltInButtons={bold:{name:"bold",action:toggleBold,className:"fa fa-bold",title:"Bold","default":!0},italic:{name:"italic",action:toggleItalic,className:"fa fa-italic",title:"Italic","default":!0},strikethrough:{name:"strikethrough",action:toggleStrikethrough,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:toggleHeadingSmaller,className:"fa fa-header",title:"Heading","default":!0},"heading-smaller":{name:"heading-smaller",action:toggleHeadingSmaller,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:toggleHeadingBigger,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:toggleHeading1,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:toggleHeading2,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:toggleHeading3,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:toggleCodeBlock,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:toggleBlockquote,className:"fa fa-quote-left",title:"Quote","default":!0},"unordered-list":{name:"unordered-list",action:toggleUnorderedList,className:"fa fa-list-ul",title:"Generic List","default":!0},"ordered-list":{name:"ordered-list",action:toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List","default":!0},"clean-block":{name:"clean-block",action:cleanBlock,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:drawLink,className:"fa fa-link",title:"Create Link","default":!0},image:{name:"image",action:drawImage,className:"fa fa-picture-o",title:"Insert Image","default":!0},table:{name:"table",action:drawTable,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:drawHorizontalRule,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:togglePreview,className:"fa fa-eye no-disable",title:"Toggle Preview","default":!0},"side-by-side":{name:"side-by-side",action:toggleSideBySide,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side","default":!0},fullscreen:{name:"fullscreen",action:toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen","default":!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide","default":!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:undo,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:redo,className:"fa fa-repeat no-disable",title:"Redo"}},insertTexts={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},promptTexts={link:"URL for the link:",image:"URL of the image:"},blockStyles={bold:"**",code:"```",italic:"*"};SimpleMDE.prototype.markdown=function(n){if(marked){var t={};return t.breaks=this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?!1:!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0&&window.hljs&&(t.highlight=function(n){return window.hljs.highlightAuto(n).value}),marked.setOptions(t),marked(n)}};SimpleMDE.prototype.render=function(n){var f,r,e,o,s;if(n||(n=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==n){this.element=n;var t=this.options,u=this,i={};for(f in t.shortcuts)t.shortcuts[f]!==null&&bindings[f]!==null&&function(n){i[fixShortcut(t.shortcuts[n])]=function(){bindings[n](u)}}(f);if(i.Enter="newlineAndIndentContinueMarkdownList",i.Tab="tabAndIndentMarkdownList",i["Shift-Tab"]="shiftTabAndUnindentMarkdownList",i.Esc=function(n){n.getOption("fullScreen")&&toggleFullScreen(u)},document.addEventListener("keydown",function(n){n=n||window.event;n.keyCode==27&&u.codemirror.getOption("fullScreen")&&toggleFullScreen(u)},!1),t.spellChecker!==!1?(r="spell-checker",e=t.parsingConfig,e.name="gfm",e.gitHubSpice=!1,CodeMirrorSpellChecker({codeMirrorInstance:CodeMirror})):(r=t.parsingConfig,r.name="gfm",r.gitHubSpice=!1),this.codemirror=CodeMirror.fromTextArea(n,{mode:r,backdrop:e,theme:"paper",tabSize:t.tabSize!=undefined?t.tabSize:2,indentUnit:t.tabSize!=undefined?t.tabSize:2,indentWithTabs:t.indentWithTabs===!1?!1:!0,lineNumbers:!1,autofocus:t.autofocus===!0?!0:!1,extraKeys:i,lineWrapping:t.lineWrapping===!1?!1:!0,allowDropFileTypes:["text/plain"],placeholder:t.placeholder||n.getAttribute("placeholder")||"",styleSelectedText:t.styleSelectedText!=undefined?t.styleSelectedText:!0}),t.forceSync===!0){o=this.codemirror;o.on("change",function(){o.save()})}this.gui={};t.toolbar!==!1&&(this.gui.toolbar=this.createToolbar());t.status!==!1&&(this.gui.statusbar=this.createStatusbar());t.autosave!=undefined&&t.autosave.enabled===!0&&this.autosave();this.gui.sideBySide=this.createSideBySide();this._rendered=this.element;s=this.codemirror;setTimeout(function(){s.refresh()}.bind(s),0)}};SimpleMDE.prototype.autosave=function(){var n,t;if(isLocalStorageAvailable()){if(n=this,this.options.autosave.uniqueId==undefined||this.options.autosave.uniqueId==""){console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");return}if(n.element.form!=null&&n.element.form!=undefined&&n.element.form.addEventListener("submit",function(){localStorage.removeItem("smde_"+n.options.autosave.uniqueId)}),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,n.value()),t=document.getElementById("autosaved"),t!=null&&t!=undefined&&t!=""){var u=new Date,f=u.getHours(),i=u.getMinutes(),e="am",r=f;r>=12&&(r=f-12,e="pm");r==0&&(r=12);i=i<10?"0"+i:i;t.innerHTML="Autosaved: "+r+":"+i+" "+e}this.autosaveTimeoutId=setTimeout(function(){n.autosave()},this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")};SimpleMDE.prototype.clearAutosavedValue=function(){if(isLocalStorageAvailable()){if(this.options.autosave==undefined||this.options.autosave.uniqueId==undefined||this.options.autosave.uniqueId==""){console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");return}localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")};SimpleMDE.prototype.createSideBySide=function(){var t=this.codemirror,u=t.getWrapperElement(),n=u.nextSibling,i,r;n&&/editor-preview-side/.test(n.className)||(n=document.createElement("div"),n.className="editor-preview-side",u.parentNode.insertBefore(n,u.nextSibling));i=!1;r=!1;t.on("scroll",function(t){if(i){i=!1;return}r=!0;var u=t.getScrollInfo().height-t.getScrollInfo().clientHeight,f=parseFloat(t.getScrollInfo().top)/u,e=(n.scrollHeight-n.clientHeight)*f;n.scrollTop=e});return n.onscroll=function(){if(r){r=!1;return}i=!0;var u=n.scrollHeight-n.clientHeight,f=parseFloat(n.scrollTop)/u,e=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*f;t.scrollTo(0,e)},n};SimpleMDE.prototype.createToolbar=function(n){var t,r,i,u,o,f,e,s;if(n=n||this.options.toolbar,n&&n.length!==0){for(t=0;t<n.length;t++)toolbarBuiltInButtons[n[t]]!=undefined&&(n[t]=toolbarBuiltInButtons[n[t]]);for(r=document.createElement("div"),r.className="editor-toolbar",i=this,u={},i.toolbar=n,t=0;t<n.length;t++)if((n[t].name!="guide"||i.options.toolbarGuideIcon!==!1)&&(!i.options.hideIcons||i.options.hideIcons.indexOf(n[t].name)==-1)&&(n[t].name!="fullscreen"&&n[t].name!="side-by-side"||!isMobile())){if(n[t]==="|"){for(o=!1,f=t+1;f<n.length;f++)n[f]==="|"||i.options.hideIcons&&i.options.hideIcons.indexOf(n[f].name)!=-1||(o=!0);if(!o)continue}(function(n){var t;t=n==="|"?createSep():createIcon(n,i.options.toolbarTips,i.options.shortcuts);n.action&&(typeof n.action=="function"?t.onclick=function(t){t.preventDefault();n.action(i)}:typeof n.action=="string"&&(t.href=n.action,t.target="_blank"));u[n.name||n]=t;r.appendChild(t)})(n[t])}i.toolbarElements=u;e=this.codemirror;e.on("cursorActivity",function(){var n=getState(e);for(var t in u)(function(t){var i=u[t];n[t]?i.className+=" active":t!="fullscreen"&&t!="side-by-side"&&(i.className=i.className.replace(/\s*active\s*/g,""))})(t)});return s=e.getWrapperElement(),s.parentNode.insertBefore(r,s),r}};SimpleMDE.prototype.createStatusbar=function(n){var c,i,e,t,o,r,u,s,f,h,l;if(n=n||this.options.status,c=this.options,i=this.codemirror,n&&n.length!==0){for(e=[],t=0;t<n.length;t++)o=undefined,r=undefined,typeof n[t]=="object"?e.push({className:n[t].className,defaultValue:n[t].defaultValue,onUpdate:n[t].onUpdate}):(u=n[t],u==="words"?(r=function(n){n.innerHTML=wordCount(i.getValue())},o=function(n){n.innerHTML=wordCount(i.getValue())}):u==="lines"?(r=function(n){n.innerHTML=i.lineCount()},o=function(n){n.innerHTML=i.lineCount()}):u==="cursor"?(r=function(n){n.innerHTML="0:0"},o=function(n){var t=i.getCursor();n.innerHTML=t.line+":"+t.ch}):u==="autosave"&&(r=function(n){c.autosave!=undefined&&c.autosave.enabled===!0&&n.setAttribute("id","autosaved")}),e.push({className:u,defaultValue:r,onUpdate:o}));for(s=document.createElement("div"),s.className="editor-statusbar",t=0;t<e.length;t++){if(f=e[t],h=document.createElement("span"),h.className=f.className,typeof f.defaultValue=="function"&&f.defaultValue(h),typeof f.onUpdate=="function")this.codemirror.on("update",function(n,t){return function(){t.onUpdate(n)}}(h,f));s.appendChild(h)}return l=this.codemirror.getWrapperElement(),l.parentNode.insertBefore(s,l.nextSibling),s}};SimpleMDE.prototype.value=function(n){return n===undefined?this.codemirror.getValue():(this.codemirror.getDoc().setValue(n),this)};SimpleMDE.toggleBold=toggleBold;SimpleMDE.toggleItalic=toggleItalic;SimpleMDE.toggleStrikethrough=toggleStrikethrough;SimpleMDE.toggleBlockquote=toggleBlockquote;SimpleMDE.toggleHeadingSmaller=toggleHeadingSmaller;SimpleMDE.toggleHeadingBigger=toggleHeadingBigger;SimpleMDE.toggleHeading1=toggleHeading1;SimpleMDE.toggleHeading2=toggleHeading2;SimpleMDE.toggleHeading3=toggleHeading3;SimpleMDE.toggleCodeBlock=toggleCodeBlock;SimpleMDE.toggleUnorderedList=toggleUnorderedList;SimpleMDE.toggleOrderedList=toggleOrderedList;SimpleMDE.cleanBlock=cleanBlock;SimpleMDE.drawLink=drawLink;SimpleMDE.drawImage=drawImage;SimpleMDE.drawTable=drawTable;SimpleMDE.drawHorizontalRule=drawHorizontalRule;SimpleMDE.undo=undo;SimpleMDE.redo=redo;SimpleMDE.togglePreview=togglePreview;SimpleMDE.toggleSideBySide=toggleSideBySide;SimpleMDE.toggleFullScreen=toggleFullScreen;SimpleMDE.prototype.toggleBold=function(){toggleBold(this)};SimpleMDE.prototype.toggleItalic=function(){toggleItalic(this)};SimpleMDE.prototype.toggleStrikethrough=function(){toggleStrikethrough(this)};SimpleMDE.prototype.toggleBlockquote=function(){toggleBlockquote(this)};SimpleMDE.prototype.toggleHeadingSmaller=function(){toggleHeadingSmaller(this)};SimpleMDE.prototype.toggleHeadingBigger=function(){toggleHeadingBigger(this)};SimpleMDE.prototype.toggleHeading1=function(){toggleHeading1(this)};SimpleMDE.prototype.toggleHeading2=function(){toggleHeading2(this)};SimpleMDE.prototype.toggleHeading3=function(){toggleHeading3(this)};SimpleMDE.prototype.toggleCodeBlock=function(){toggleCodeBlock(this)};SimpleMDE.prototype.toggleUnorderedList=function(){toggleUnorderedList(this)};SimpleMDE.prototype.toggleOrderedList=function(){toggleOrderedList(this)};SimpleMDE.prototype.cleanBlock=function(){cleanBlock(this)};SimpleMDE.prototype.drawLink=function(){drawLink(this)};SimpleMDE.prototype.drawImage=function(){drawImage(this)};SimpleMDE.prototype.drawTable=function(){drawTable(this)};SimpleMDE.prototype.drawHorizontalRule=function(){drawHorizontalRule(this)};SimpleMDE.prototype.undo=function(){undo(this)};SimpleMDE.prototype.redo=function(){redo(this)};SimpleMDE.prototype.togglePreview=function(){togglePreview(this)};SimpleMDE.prototype.toggleSideBySide=function(){toggleSideBySide(this)};SimpleMDE.prototype.toggleFullScreen=function(){toggleFullScreen(this)};SimpleMDE.prototype.isPreviewActive=function(){var n=this.codemirror,t=n.getWrapperElement(),i=t.lastChild;return/editor-preview-active/.test(i.className)};SimpleMDE.prototype.isSideBySideActive=function(){var n=this.codemirror,t=n.getWrapperElement(),i=t.nextSibling;return/editor-preview-active-side/.test(i.className)};SimpleMDE.prototype.isFullscreenActive=function(){var n=this.codemirror;return n.getOption("fullScreen")};SimpleMDE.prototype.getState=function(){var n=this.codemirror;return getState(n)};SimpleMDE.prototype.toTextArea=function(){var t=this.codemirror,n=t.getWrapperElement();n.parentNode&&(this.gui.toolbar&&n.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&n.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&n.parentNode.removeChild(this.gui.sideBySide));t.toTextArea();this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=undefined,this.clearAutosavedValue())};module.exports=SimpleMDE;